import './polyfills.server.mjs';
import{b as U,f as M,g as R}from"./chunk-G4DVHU7Q.mjs";import"./chunk-K6AYXP3Q.mjs";import{a as h}from"./chunk-6N7CIDGI.mjs";import"./chunk-4EVD5Z2M.mjs";import{a as o}from"./chunk-XTAIGVHX.mjs";import"./chunk-P2LXTYIO.mjs";import{a as A}from"./chunk-VWSEUJSM.mjs";import{a as P}from"./chunk-ILRWNN2W.mjs";import{b as y,c as D,d as E}from"./chunk-T6JGTEUQ.mjs";import{i as B}from"./chunk-NW44QHZH.mjs";import{Da as C,Ga as I,Ha as w,S as l,T as n,ba as p,ja as c,ka as u,la as v,pa as d,sa as b,ta as g,ua as S,va as _,wa as T,y as f,zb as F}from"./chunk-7ZALS5IL.mjs";import{h as r}from"./chunk-COT65Y5O.mjs";var j=(()=>{class m{constructor(a,e,t,i,s){this.router=a,this.userService=e,this.permisosService=t,this.finalService=i,this.translate=s,this.permisos=[],this.showcampoFiltro=!1,this.endPoint="user",this.filters="",this.columnas=[{title:"ID",data:"id"},{title:"Email",data:"email"},{title:"First name",data:"firstName"},{title:"Last name",data:"lastName"},{title:"Status",data:"isActive"}],this.permisosAcciones=this.permisos,this.tamano="",this.scrollable=!1,this.title="",this.save=!0,this.buttonSave="Guardar",this.edit=!0,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="",this.search=!0,this.buttonSearch="Buscar",this.iconFilter="fa fa-filter",this.componenteFilter="FiltroUsuariosComponent"}ngOnInit(){return r(this,null,function*(){yield this.userService.refreshToken("authadmin");let a=yield this.userService.getUser("authadmin"),e=yield this.permisosService.permisos(a.data.id,"finales");this.permisos=e.data})}crearData(a){localStorage.setItem("profile","user"),this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-usuarios.Title.CreateUserFinalWord"),this.save=!0,this.buttonSave="Guardar",this.edit=!1,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="CrearUsuariosComponent";let e=document.getElementById("miBoton");e&&(e.setAttribute("componente",this.componentePrecargado),e.click())}verData(a){this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-usuarios.Title.SeeUserFinalWord"),this.save=!1,this.buttonSave="Guardar",this.edit=!1,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="VerUsuariosComponent";let e=document.getElementById("miBoton");e&&(this.router.navigate([],{queryParams:{rol:"admin",id:a}}),e.setAttribute("componente",this.componentePrecargado),e.click())}editarData(a){localStorage.setItem("profile","user"),this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-usuarios.Title.EditUserFinalWord"),this.save=!1,this.buttonSave="Guardar",this.edit=!0,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.componentePrecargado="EditarUsuariosComponent";let e=document.getElementById("miBoton");e&&(this.router.navigate([],{queryParams:{rol:"admin",id:a}}),e.setAttribute("componente",this.componentePrecargado),e.click())}eliminarData(a){console.log("eliminarData "+a),this.translate.get("pages-usuarios.Swal.TitleAreYouSure").subscribe(e=>{o.fire({title:e,text:this.translate.instant("pages-usuarios.Swal.TitleWarnigRevert"),icon:"warning",showCancelButton:!0,confirmButtonText:this.translate.instant("pages-usuarios.Swal.TitleDelete"),cancelButtonText:this.translate.instant("pages-usuarios.Swal.TitleCancel")}).then(t=>r(this,null,function*(){t.isConfirmed&&t.isConfirmed&&(yield this.finalService.deleteUser(a),yield this.someInput.reload(),o.fire({title:this.translate.instant("pages-usuarios.Swal.TitleDelete"),text:this.translate.instant("pages-usuarios.Swal.TitleRegisterDeleted"),icon:"success"}))}))})}refrescarTabla(){return r(this,null,function*(){setTimeout(()=>r(this,null,function*(){yield this.someInput.reload()}),100)})}activarData(a){console.log("activarData "+a),this.translate.get("pages-usuarios.Swal.TitleAreYouSure").subscribe(e=>{o.fire({title:this.translate.instant("pages-usuarios.Swal.TitleAreYouSure"),showDenyButton:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("pages-usuarios.Swal.TitleActived"),cancelButtonText:this.translate.instant("pages-usuarios.Swal.TitleCancel"),denyButtonText:this.translate.instant("pages-usuarios.Swal.TitleInactived")}).then(t=>r(this,null,function*(){t.isConfirmed?(yield this.finalService.updateUser({isActive:!0},a),yield this.someInput.reload(),o.fire({title:this.translate.instant("pages-usuarios.Swal.TitleActived"),text:this.translate.instant("pages-usuarios.Swal.TitleRegisterActived"),icon:"success"})):t.isDenied&&(yield this.finalService.updateUser({isActive:!1},a),yield this.someInput.reload(),o.fire({title:this.translate.instant("pages-usuarios.Swal.TitleInactived"),text:this.translate.instant("pages-usuarios.Swal.TitleRegisterInactived"),icon:"success"}))}))})}filtroData(){return r(this,null,function*(){let a=yield $(".complementoRuta").val();typeof a=="string"?this.filters=a:this.filters=""})}static{this.\u0275fac=function(e){return new(e||m)(n(F),n(B),n(A),n(U),n(y))}}static{this.\u0275cmp=f({type:m,selectors:[["app-menu-usuarios-finales"]],viewQuery:function(e,t){if(e&1&&b(h,5),e&2){let i;g(i=S())&&(t.someInput=i.first)}},standalone:!0,features:[C],decls:9,vars:21,consts:[[1,""],[3,"filtroItem","icon","componente"],[1,"card","p-5"],[3,"verItem","crearNuevoItem","editarItem","eliminarItem","activarItem","campoFiltro","endPoint","columnas","permisosAcciones","filters"],[3,"actualizarTabla","tamano","scrollable","title","save","buttonSave","edit","buttonEdit","cancel","buttonCancel","componentePrecargado","cierreModal"]],template:function(e,t){e&1&&(c(0,"div",0)(1,"h1"),_(2),I(3,"translate"),u(),c(4,"app-globales-search",1),d("filtroItem",function(){return t.filtroData()}),u(),v(5,"br"),c(6,"div",2)(7,"app-globales-tablecrud",3),d("verItem",function(s){return t.verData(s)})("crearNuevoItem",function(s){return t.crearData(s)})("editarItem",function(s){return t.editarData(s)})("eliminarItem",function(s){return t.eliminarData(s)})("activarItem",function(s){return t.activarData(s)}),u()(),c(8,"app-globales-modal-boostrap",4),d("actualizarTabla",function(){return t.refrescarTabla()}),u()()),e&2&&(l(2),T(w(3,19,"pages-usuarios.Tipo.FinalWord")),l(2),p("icon",t.iconFilter)("componente",t.componenteFilter),l(3),p("campoFiltro",t.showcampoFiltro)("endPoint",t.endPoint)("columnas",t.columnas)("permisosAcciones",t.permisos)("filters",t.filters),l(),p("tamano",t.tamano)("scrollable",t.scrollable)("title",t.title)("save",t.save)("buttonSave",t.buttonSave)("edit",t.edit)("buttonEdit",t.buttonEdit)("cancel",t.cancel)("buttonCancel",t.buttonCancel)("componentePrecargado",t.componentePrecargado)("cierreModal",t.cierreModal))},dependencies:[E,D,R,h,M]})}}return m})();var tt=[{path:"",data:{breadcrumb:"Lista"},title:"Usuarios",canActivate:[P],component:j}];export{tt as UsuariosFinalesRoutes};
