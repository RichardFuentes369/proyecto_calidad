import{a as H,f as J,g as K}from"./chunk-TQT2622L.js";import{b as O}from"./chunk-FJ6OPYKC.js";import{a as ne}from"./chunk-O2VPJG5H.js";import"./chunk-J5ZODM7E.js";import"./chunk-TAREQWT5.js";import{a as X}from"./chunk-5FTLJTVX.js";import{a as q}from"./chunk-TC2SCE45.js";import{a as R}from"./chunk-UYRLFEU7.js";import{a as U}from"./chunk-NBLA4CFA.js";import{b as D,c as M,d as B}from"./chunk-RSDMMZGM.js";import{B as _,C as d,Da as Q,Ga as L,I as r,J as u,O as h,Q as x,Qa as Y,Sa as z,T as b,U as S,W as I,X as F,Y as s,Ya as j,Z as l,_ as g,ba as C,ca as m,da as a,ea as P,fa as N,ga as G,ha as W,ia as v,ja as y,ka as w,qa as k,ta as E,ua as V,w as A}from"./chunk-N3246BH5.js";import{g as ie,h as f}from"./chunk-YGAJRIQG.js";var T=ie(ne());var Z=(()=>{class i{constructor(e,n,t,o,p){this.router=e,this.userService=n,this.permisosService=t,this.principalService=o,this.translate=p,this.permisos=[],this.showcampoFiltro=!1,this.endPoint="admin",this.filters="",this.columnas=[{title:"ID",data:"id"},{title:"Email",data:"email"},{title:"First name",data:"firstName"},{title:"Last name",data:"lastName"},{title:"Status",data:"isActive"}],this.permisosAcciones=this.permisos,this.tamano="",this.scrollable=!1,this.title="",this.save=!0,this.buttonSave="Guardar",this.edit=!0,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="",this.search=!0,this.buttonSearch="Buscar",this.iconFilter="fa fa-filter",this.componenteFilter="FiltroUsuariosComponent"}ngOnInit(){return f(this,null,function*(){yield this.userService.refreshToken("authadmin");let e=yield this.userService.getUser("authadmin"),n=yield this.permisosService.permisos(e.data.id,"administradores");this.permisos=n.data})}crearData(e){localStorage.setItem("profile","admin"),this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-usuarios.Title.CreateAdminWord"),this.save=!0,this.buttonSave="Guardar",this.edit=!1,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="CrearUsuariosComponent";let n=document.getElementById("miBoton");n&&(n.setAttribute("componente",this.componentePrecargado),n.click())}verData(e){this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-usuarios.Title.SeeAdminWord"),this.save=!1,this.buttonSave="Guardar",this.edit=!1,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="VerUsuariosComponent";let n=document.getElementById("miBoton");n&&(this.router.navigate([],{queryParams:{rol:"user",id:e}}),n.setAttribute("componente",this.componentePrecargado),n.click())}editarData(e){localStorage.setItem("profile","admin"),this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-usuarios.Title.EditAdminWord"),this.save=!1,this.buttonSave="Guardar",this.edit=!0,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.componentePrecargado="EditarUsuariosComponent";let n=document.getElementById("miBoton");n&&(this.router.navigate([],{queryParams:{rol:"user",id:e}}),n.setAttribute("componente",this.componentePrecargado),n.click())}asignarData(e){console.log("asignarData "+e),this.router.navigate(["/admin/menu/index-usuarios/administradores/asignar-administrador/"],{queryParams:{id:e}})}eliminarData(e){console.log("eliminarData "+e),this.translate.get("pages-usuarios.Swal.TitleAreYouSure").subscribe(n=>{T.default.fire({title:n,text:this.translate.instant("pages-usuarios.Swal.TitleWarnigRevert"),icon:"warning",showCancelButton:!0,confirmButtonText:this.translate.instant("pages-usuarios.Swal.TitleDelete"),cancelButtonText:this.translate.instant("pages-usuarios.Swal.TitleCancel")}).then(t=>f(this,null,function*(){t.isConfirmed&&t.isConfirmed&&(yield this.principalService.deleteUser(e),yield this.someInput.reload(),T.default.fire({title:this.translate.instant("pages-usuarios.Swal.TitleDelete"),text:this.translate.instant("pages-usuarios.Swal.TitleRegisterDeleted"),icon:"success"}))}))})}refrescarTabla(){return f(this,null,function*(){setTimeout(()=>f(this,null,function*(){yield this.someInput.reload()}),100)})}activarData(e){console.log("activarData "+e),this.translate.get("pages-usuarios.Swal.TitleAreYouSure").subscribe(n=>{T.default.fire({title:this.translate.instant("pages-usuarios.Swal.TitleAreYouSure"),showDenyButton:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("pages-usuarios.Swal.TitleActived"),cancelButtonText:this.translate.instant("pages-usuarios.Swal.TitleCancel"),denyButtonText:this.translate.instant("pages-usuarios.Swal.TitleInactived")}).then(t=>f(this,null,function*(){t.isConfirmed?(yield this.principalService.updateUser({isActive:!0},e),yield this.someInput.reload(),T.default.fire({title:this.translate.instant("pages-usuarios.Swal.TitleActived"),text:this.translate.instant("pages-usuarios.Swal.TitleRegisterActived"),icon:"success"})):t.isDenied&&(yield this.principalService.updateUser({isActive:!1},e),yield this.someInput.reload(),T.default.fire({title:this.translate.instant("pages-usuarios.Swal.TitleInactived"),text:this.translate.instant("pages-usuarios.Swal.TitleRegisterInactived"),icon:"success"}))}))})}filtroData(){return f(this,null,function*(){let e=yield $(".complementoRuta").val();typeof e=="string"?this.filters=e:this.filters=""})}static{this.\u0275fac=function(n){return new(n||i)(u(z),u(j),u(R),u(H),u(D))}}static{this.\u0275cmp=A({type:i,selectors:[["app-principal"]],viewQuery:function(n,t){if(n&1&&N(q,5),n&2){let o;G(o=W())&&(t.someInput=o.first)}},standalone:!0,features:[k],decls:9,vars:21,consts:[[1,""],[3,"filtroItem","icon","componente"],[1,"card","p-5"],[3,"verItem","crearNuevoItem","editarItem","eliminarItem","activarItem","asignar","campoFiltro","endPoint","columnas","permisosAcciones","filters"],[3,"actualizarTabla","tamano","scrollable","title","save","buttonSave","edit","buttonEdit","cancel","buttonCancel","componentePrecargado","cierreModal"]],template:function(n,t){n&1&&(s(0,"div",0)(1,"h1"),v(2),E(3,"translate"),l(),s(4,"app-globales-search",1),m("filtroItem",function(){return t.filtroData()}),l(),g(5,"br"),s(6,"div",2)(7,"app-globales-tablecrud",3),m("verItem",function(p){return t.verData(p)})("crearNuevoItem",function(p){return t.crearData(p)})("editarItem",function(p){return t.editarData(p)})("eliminarItem",function(p){return t.eliminarData(p)})("activarItem",function(p){return t.activarData(p)})("asignar",function(p){return t.asignarData(p)}),l()(),s(8,"app-globales-modal-boostrap",4),m("actualizarTabla",function(){return t.refrescarTabla()}),l()()),n&2&&(r(2),y(V(3,19,"pages-usuarios.Tipo.AdminWord")),r(2),x("icon",t.iconFilter)("componente",t.componenteFilter),r(3),x("campoFiltro",t.showcampoFiltro)("endPoint",t.endPoint)("columnas",t.columnas)("permisosAcciones",t.permisos)("filters",t.filters),r(),x("tamano",t.tamano)("scrollable",t.scrollable)("title",t.title)("save",t.save)("buttonSave",t.buttonSave)("edit",t.edit)("buttonEdit",t.buttonEdit)("cancel",t.cancel)("buttonCancel",t.buttonCancel)("componentePrecargado",t.componentePrecargado)("cierreModal",t.cierreModal))},dependencies:[B,M,K,q,J]})}}return i})();function ce(i,c){if(i&1){let e=C();s(0,"input",9),m("click",function(){_(e);let t=a(2).$implicit,o=a();return d(o.actualizarPermiso(t))}),l()}}function me(i,c){if(i&1){let e=C();s(0,"input",10),m("click",function(){_(e);let t=a(2).$implicit,o=a();return d(o.actualizarPermiso(t))}),l()}}function pe(i,c){if(i&1){let e=C();s(0,"input",9),m("click",function(){_(e);let t=a().$implicit,o=a(4);return d(o.actualizarPermiso(t))}),l()}}function _e(i,c){if(i&1){let e=C();s(0,"input",10),m("click",function(){_(e);let t=a().$implicit,o=a(4);return d(o.actualizarPermiso(t))}),l()}}function de(i,c){if(i&1){let e=C();s(0,"input",9),m("click",function(){_(e);let t=a().$implicit,o=a(5);return d(o.actualizarPermiso(t))}),l()}}function ue(i,c){if(i&1){let e=C();s(0,"input",10),m("click",function(){_(e);let t=a().$implicit,o=a(5);return d(o.actualizarPermiso(t))}),l()}}function Ce(i,c){if(i&1&&(h(0,de,1,0,"input",5)(1,ue,1,0),v(2),g(3,"i",12)(4,"br")),i&2){let e=c.$implicit;b(0,e.asignado=="1"?0:1),r(2),w(" ",e.mpm_nombre," "),r(),P("title",e.mpm_descripcion)}}function fe(i,c){if(i&1&&(s(0,"div",3)(1,"div",4),h(2,pe,1,0,"input",5)(3,_e,1,0),v(4),g(5,"i",12)(6,"br"),l(),s(7,"div",13),I(8,Ce,5,3,null,null,S),l()()),i&2){let e=c.$implicit;r(2),b(2,e.asignado=="1"?2:3),r(2),w(" ",e.mpm_nombre," "),r(),P("title",e.mpm_descripcion),r(3),F(e.children)}}function ge(i,c){if(i&1&&(s(0,"div")(1,"div",11),I(2,fe,10,3,"div",3,S),l()()),i&2){let e=a(2).$implicit;r(2),F(e.children)}}function he(i,c){if(i&1){let e=C();s(0,"div",3)(1,"div",4),h(2,ce,1,0,"input",5)(3,me,1,0),s(4,"a",6),m("click",function(){_(e);let t=a().$implicit,o=a();return d(o.toggleCollapse(t.mpm_permiso,t.mpm_toogle))}),v(5),g(6,"i",7),l()()(),h(7,ge,4,0,"div",8),g(8,"br")}if(i&2){let e=a().$implicit;r(2),b(2,e.asignado=="1"?2:3),r(3),w(" ",e.mpm_nombre," "),r(),P("title",e.mpm_descripcion),r(),x("ngIf",e.mpm_toogle)}}function ve(i,c){if(i&1){let e=C();s(0,"input",9),m("click",function(){_(e);let t=a(2).$implicit,o=a();return d(o.actualizarPermiso(t))}),l()}}function xe(i,c){if(i&1){let e=C();s(0,"input",10),m("click",function(){_(e);let t=a(2).$implicit,o=a();return d(o.actualizarPermiso(t))}),l()}}function be(i,c){if(i&1){let e=C();s(0,"input",9),m("click",function(){_(e);let t=a().$implicit,o=a(4);return d(o.actualizarPermiso(t))}),l()}}function Pe(i,c){if(i&1){let e=C();s(0,"input",10),m("click",function(){_(e);let t=a().$implicit,o=a(4);return d(o.actualizarPermiso(t))}),l()}}function we(i,c){if(i&1&&(h(0,be,1,0,"input",5)(1,Pe,1,0),v(2),g(3,"i",7)(4,"br")),i&2){let e=c.$implicit;b(0,e.asignado=="1"?0:1),r(2),w(" ",e.mpm_permiso," "),r(),P("title",e.mpm_descripcion)}}function Te(i,c){if(i&1&&(s(0,"div")(1,"div",11)(2,"div",3)(3,"div",13),I(4,we,5,3,null,null,S),l()()()()),i&2){let e=a(2).$implicit;r(4),F(e.children)}}function Se(i,c){if(i&1){let e=C();s(0,"div",3)(1,"div",4),h(2,ve,1,0,"input",5)(3,xe,1,0),s(4,"a",6),m("click",function(){_(e);let t=a().$implicit,o=a();return d(o.toggleCollapse(t.mpm_permiso,t.mpm_toogle))}),v(5),g(6,"i",12)(7,"br"),l()()(),h(8,Te,6,0,"div",8),g(9,"br")}if(i&2){let e=a().$implicit;r(2),b(2,e.asignado=="1"?2:3),r(3),w(" ",e.mpm_nombre," "),r(),P("title",e.mpm_descripcion),r(2),x("ngIf",e.mpm_toogle)}}function Ie(i,c){if(i&1&&h(0,he,9,4)(1,Se,10,4),i&2){let e=c.$implicit,n=a();b(0,n.sinModulo.includes(e.mpm_permiso)?1:0)}}var ee=(()=>{class i{constructor(e,n,t,o,p,te){this.router=e,this.route=n,this.userService=t,this.modulosService=o,this.PermisosService=p,this.translate=te,this.permisos=[],this.sinModulo=["modulos","mantenimiento","zona_comun","proveedor"]}ngOnInit(){return f(this,null,function*(){yield this.userService.refreshToken("authadmin");let e=yield this.userService.getUser("authadmin"),n=this.route.snapshot.queryParams.id,t=yield this.modulosService.listaPermisos(+n);this.permisos=t.data})}actualizarPermiso(e){return f(this,null,function*(){let n=this.route.snapshot.queryParams.id,t="";e.asignado==null||e.asignado=="0"?(e.asignado="1",t="0"):(e.asignado="0",t="1"),yield this.modulosService.actualizarPermiso(e.mpm_id,e.mpm_modulo_padre_id,t,n).then(o=>{O(o.data.title,o.data.message,"success")}).catch(o=>{O(o.response.data.title,o.response.data.error,"error")})})}toggleCollapse(e,n){let t=this.permisos.find(o=>o.mpm_permiso==e);t.mpm_toogle=!n}static{this.\u0275fac=function(n){return new(n||i)(u(z),u(Y),u(j),u(X),u(R),u(D))}}static{this.\u0275cmp=A({type:i,selectors:[["app-asignar-permisos"]],standalone:!0,features:[k],decls:8,vars:3,consts:[[1,""],[1,"p-5"],[1,"parent"],[1,"card"],[1,"card-header","text-center"],["type","checkbox","checked","",1,"form-check-input"],[1,"btn","btn-link","collapsed","text-left","p-0",2,"text-decoration","none",3,"click"],[1,"form-text","fa","fa-info-circle",3,"title"],[4,"ngIf"],["type","checkbox","checked","",1,"form-check-input",3,"click"],["type","checkbox",1,"form-check-input",3,"click"],[1,"item"],[1,"form-text","fa","fa-info-circle",2,"cursor","pointer",3,"title"],[1,"card-body","pl-5"]],template:function(n,t){n&1&&(s(0,"div",0)(1,"h1"),v(2),E(3,"translate"),l(),s(4,"div",1)(5,"div",2),I(6,Ie,2,1,null,null,S),l()()()),n&2&&(r(2),y(V(3,1,"pages-usuarios.Title.PermissionsTitle")),r(4),F(t.permisos))},dependencies:[L,Q,B,M],styles:["@media only screen and (min-width: 1024px) and (orientation: landscape){.item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:.5rem!important;gap:10px}.card[_ngcontent-%COMP%]{flex:1 1 calc(25% - 10px)}}@media only screen and (min-width: 1024px) and (orientation: portrait){.item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:.5rem!important;gap:10px}.card[_ngcontent-%COMP%]{flex:1 1 calc(25% - 10px)}}@media only screen and (max-width: 1023px) and (orientation: landscape){.card[_ngcontent-%COMP%]{margin-top:.5rem!important;margin-bottom:.5rem!important}}@media only screen and (max-width: 1023px) and (orientation: portrait){.card[_ngcontent-%COMP%]{margin-top:.5rem!important;margin-bottom:.5rem!important}}"]})}}return i})();var Qe=[{path:"",data:{breadcrumb:"Lista"},title:"Administradores",canActivate:[U],component:Z},{path:"asignar-administrador",data:{breadcrumb:"Asignar"},title:"Asignar usuario administrador",canActivate:[U],component:ee}];export{Qe as UsuariosAdministradoresRoutes};
