import{e as z,f as G,g as j}from"./chunk-POHEHLNQ.js";import"./chunk-FJ6OPYKC.js";import{a as q}from"./chunk-O2VPJG5H.js";import"./chunk-J5ZODM7E.js";import{a as R}from"./chunk-TAREQWT5.js";import{a as u}from"./chunk-67BEARJV.js";import{a as F}from"./chunk-UYRLFEU7.js";import{a as A}from"./chunk-NBLA4CFA.js";import{b as E,c as P,d as D}from"./chunk-RSDMMZGM.js";import{Ga as M,I as s,J as r,Q as d,Sa as w,Y as l,Ya as B,Z as m,_ as b,ca as p,fa as v,ga as _,ha as g,ia as I,ja as C,qa as S,ta as T,ua as y,w as f}from"./chunk-N3246BH5.js";import{g as W,h as o}from"./chunk-YGAJRIQG.js";var h=W(q());var k=(()=>{class c{constructor(i,e,t,a,n){this.router=i,this.userService=e,this.permisosService=t,this.mantenimientoService=a,this.translate=n,this.permisos=[],this.showcampoFiltro=!1,this.endPoint="orden-mantenimiento",this.filters="",this.columnas=[{title:"ID",data:"id"},{title:"Area Name",data:"zona_id.nombre"},{title:"Area Description",data:"zona_id.descripcion"},{title:"# Registro",data:"serial"},{title:"Description",data:"descripcion"},{title:"maintenance_at",data:"fecha_mantenimiento"},{title:"Status",data:"estado"},{title:"Price",data:"precio"},{title:"Created At",data:"fecha_creacion"},{title:"Updated At",data:"fecha_actualizacion"}],this.permisosAcciones=this.permisos,this.tamano="",this.scrollable=!1,this.title="",this.save=!0,this.buttonSave="Guardar",this.edit=!0,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="",this.search=!0,this.buttonSearch="Buscar",this.iconFilter="fa fa-filter",this.componenteFilter="FiltroMantenimientoComponent"}ngOnInit(){return o(this,null,function*(){yield this.userService.refreshToken("authadmin");let i=yield this.userService.getUser("authadmin"),e=yield this.permisosService.permisos(i.data.id,"mantenimiento");this.permisos=e.data})}crearData(i){this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-mantenimiento.Title.CreateMaintenanceWord"),this.save=!0,this.buttonSave="Guardar",this.edit=!1,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="static",this.componentePrecargado="CrearMantenimientoComponent";let e=document.getElementById("miBoton");e&&(e.setAttribute("componente",this.componentePrecargado),e.click())}verData(i){this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-mantenimiento.Title.SeeMaintenanceWord"),this.save=!1,this.buttonSave="Guardar",this.edit=!1,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="VerMantenimientoComponent";let e=document.getElementById("miBoton");e&&(this.router.navigate([],{queryParams:{id:i}}),e.setAttribute("componente",this.componentePrecargado),e.click())}editarData(i){this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-mantenimiento.Title.EditMaintenanceWord"),this.save=!1,this.buttonSave="Guardar",this.edit=!0,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.componentePrecargado="EditarMantenimientoComponent";let e=document.getElementById("miBoton");e&&(this.router.navigate([],{queryParams:{id:i}}),e.setAttribute("componente",this.componentePrecargado),e.click())}eliminarData(i){console.log("eliminarData "+i),this.translate.get("pages-mantenimiento.Swal.TitleAreYouSure").subscribe(e=>{h.default.fire({title:e,text:this.translate.instant("pages-mantenimiento.Swal.TitleWarnigRevert"),icon:"warning",showCancelButton:!0,confirmButtonText:this.translate.instant("pages-mantenimiento.Swal.TitleDelete"),cancelButtonText:this.translate.instant("pages-mantenimiento.Swal.TitleCancel")}).then(t=>o(this,null,function*(){t.isConfirmed&&t.isConfirmed&&(yield this.mantenimientoService.deleteOrden(i),yield this.someInput.reload(),h.default.fire({title:this.translate.instant("pages-mantenimiento.Swal.TitleDelete"),text:this.translate.instant("pages-mantenimiento.Swal.TitleRegisterDeleted"),icon:"success"}))}))})}historicoData(i){this.tamano="xl",this.scrollable=!0,this.title=this.translate.instant("pages-mantenimiento.Title.HistoryWord"),this.save=!1,this.buttonSave="Guardar",this.edit=!1,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.componentePrecargado="HistoricoComponent",this.cierreModal="false";let e=document.getElementById("miBoton");e&&(this.router.navigate([],{queryParams:{id:i}}),e.setAttribute("componente",this.componentePrecargado),e.click())}refrescarTabla(){return o(this,null,function*(){setTimeout(()=>o(this,null,function*(){yield this.someInput.reload()}),100)})}filtroData(){return o(this,null,function*(){let i=yield $(".complementoRuta").val();typeof i=="string"?this.filters=i:this.filters=""})}static{this.\u0275fac=function(e){return new(e||c)(r(w),r(B),r(F),r(z),r(E))}}static{this.\u0275cmp=f({type:c,selectors:[["app-mantenimiento-index"]],viewQuery:function(e,t){if(e&1&&v(u,5),e&2){let a;_(a=g())&&(t.someInput=a.first)}},standalone:!0,features:[S],decls:9,vars:21,consts:[[1,""],[3,"filtroItem","icon","componente"],[1,"card","p-5"],[3,"verItem","crearNuevoItem","editarItem","eliminarItem","historicoItem","campoFiltro","endPoint","columnas","permisosAcciones","filters"],[3,"actualizarTabla","tamano","scrollable","title","save","buttonSave","edit","buttonEdit","cancel","buttonCancel","componentePrecargado","cierreModal"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1"),I(2),T(3,"translate"),m(),l(4,"app-globales-search",1),p("filtroItem",function(){return t.filtroData()}),m(),b(5,"br"),l(6,"div",2)(7,"app-globales-tablecrud",3),p("verItem",function(n){return t.verData(n)})("crearNuevoItem",function(n){return t.crearData(n)})("editarItem",function(n){return t.editarData(n)})("eliminarItem",function(n){return t.eliminarData(n)})("historicoItem",function(n){return t.historicoData(n)}),m()(),l(8,"app-globales-modal-boostrap",4),p("actualizarTabla",function(){return t.refrescarTabla()}),m()()),e&2&&(s(2),C(y(3,19,"pages-mantenimiento.Title.Module")),s(2),d("icon",t.iconFilter)("componente",t.componenteFilter),s(3),d("campoFiltro",!0)("endPoint",t.endPoint)("columnas",t.columnas)("permisosAcciones",t.permisos)("filters",t.filters),s(),d("tamano",t.tamano)("scrollable",t.scrollable)("title",t.title)("save",t.save)("buttonSave",t.buttonSave)("edit",t.edit)("buttonEdit",t.buttonEdit)("cancel",t.cancel)("buttonCancel",t.buttonCancel)("componentePrecargado",t.componentePrecargado)("cierreModal",t.cierreModal))},dependencies:[M,R,D,P,j,u,G]})}}return c})();var ot=[{path:"",data:{breadcrumb:"Index"},canActivate:[A],component:k}];export{ot as MantenimientoRouter};
