import{a as Y,f as H,g as J}from"./chunk-POHEHLNQ.js";import{b as U}from"./chunk-FJ6OPYKC.js";import{a as ie}from"./chunk-O2VPJG5H.js";import"./chunk-J5ZODM7E.js";import"./chunk-TAREQWT5.js";import{a as K}from"./chunk-5FTLJTVX.js";import{a as O}from"./chunk-67BEARJV.js";import{a as j}from"./chunk-UYRLFEU7.js";import{a as R}from"./chunk-NBLA4CFA.js";import{b as V,c as D,d as M}from"./chunk-RSDMMZGM.js";import{B as p,C as d,Da as W,Ga as Q,I as c,J as u,O as g,Q as v,Qa as L,Sa as B,T as x,U as T,W as S,X as F,Y as r,Ya as z,Z as s,_ as b,ba as C,ca as m,da as a,fa as q,ga as N,ha as G,ia as h,ja as A,ka as P,qa as y,ta as k,ua as E,w as I}from"./chunk-N3246BH5.js";import{g as te,h as f}from"./chunk-YGAJRIQG.js";var w=te(ie());var X=(()=>{class i{constructor(e,n,t,o,_){this.router=e,this.userService=n,this.permisosService=t,this.principalService=o,this.translate=_,this.permisos=[],this.showcampoFiltro=!1,this.endPoint="admin",this.filters="",this.columnas=[{title:"ID",data:"id"},{title:"Email",data:"email"},{title:"First name",data:"firstName"},{title:"Last name",data:"lastName"},{title:"Status",data:"isActive"}],this.permisosAcciones=this.permisos,this.tamano="",this.scrollable=!1,this.title="",this.save=!0,this.buttonSave="Guardar",this.edit=!0,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="",this.search=!0,this.buttonSearch="Buscar",this.iconFilter="fa fa-filter",this.componenteFilter="FiltroUsuariosComponent"}ngOnInit(){return f(this,null,function*(){yield this.userService.refreshToken("authadmin");let e=yield this.userService.getUser("authadmin"),n=yield this.permisosService.permisos(e.data.id,"administradores");this.permisos=n.data})}crearData(e){localStorage.setItem("profile","admin"),this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-usuarios.Title.CreateAdminWord"),this.save=!0,this.buttonSave="Guardar",this.edit=!1,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="CrearUsuariosComponent";let n=document.getElementById("miBoton");n&&(n.setAttribute("componente",this.componentePrecargado),n.click())}verData(e){this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-usuarios.Title.SeeAdminWord"),this.save=!1,this.buttonSave="Guardar",this.edit=!1,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.cierreModal="true",this.componentePrecargado="VerUsuariosComponent";let n=document.getElementById("miBoton");n&&(this.router.navigate([],{queryParams:{rol:"user",id:e}}),n.setAttribute("componente",this.componentePrecargado),n.click())}editarData(e){localStorage.setItem("profile","admin"),this.tamano="xl",this.scrollable=!1,this.title=this.translate.instant("pages-usuarios.Title.EditAdminWord"),this.save=!1,this.buttonSave="Guardar",this.edit=!0,this.buttonEdit="Editar",this.cancel=!0,this.buttonCancel="Cancelar",this.componentePrecargado="EditarUsuariosComponent";let n=document.getElementById("miBoton");n&&(this.router.navigate([],{queryParams:{rol:"user",id:e}}),n.setAttribute("componente",this.componentePrecargado),n.click())}asignarData(e){console.log("asignarData "+e),this.router.navigate(["/admin/menu/index-usuarios/administradores/asignar-administrador/"],{queryParams:{id:e}})}eliminarData(e){console.log("eliminarData "+e),this.translate.get("pages-usuarios.Swal.TitleAreYouSure").subscribe(n=>{w.default.fire({title:n,text:this.translate.instant("pages-usuarios.Swal.TitleWarnigRevert"),icon:"warning",showCancelButton:!0,confirmButtonText:this.translate.instant("pages-usuarios.Swal.TitleDelete"),cancelButtonText:this.translate.instant("pages-usuarios.Swal.TitleCancel")}).then(t=>f(this,null,function*(){t.isConfirmed&&t.isConfirmed&&(yield this.principalService.deleteUser(e),yield this.someInput.reload(),w.default.fire({title:this.translate.instant("pages-usuarios.Swal.TitleDelete"),text:this.translate.instant("pages-usuarios.Swal.TitleRegisterDeleted"),icon:"success"}))}))})}refrescarTabla(){return f(this,null,function*(){setTimeout(()=>f(this,null,function*(){yield this.someInput.reload()}),100)})}activarData(e){console.log("activarData "+e),this.translate.get("pages-usuarios.Swal.TitleAreYouSure").subscribe(n=>{w.default.fire({title:this.translate.instant("pages-usuarios.Swal.TitleAreYouSure"),showDenyButton:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("pages-usuarios.Swal.TitleActived"),cancelButtonText:this.translate.instant("pages-usuarios.Swal.TitleCancel"),denyButtonText:this.translate.instant("pages-usuarios.Swal.TitleInactived")}).then(t=>f(this,null,function*(){t.isConfirmed?(yield this.principalService.updateUser({isActive:!0},e),yield this.someInput.reload(),w.default.fire({title:this.translate.instant("pages-usuarios.Swal.TitleActived"),text:this.translate.instant("pages-usuarios.Swal.TitleRegisterActived"),icon:"success"})):t.isDenied&&(yield this.principalService.updateUser({isActive:!1},e),yield this.someInput.reload(),w.default.fire({title:this.translate.instant("pages-usuarios.Swal.TitleInactived"),text:this.translate.instant("pages-usuarios.Swal.TitleRegisterInactived"),icon:"success"}))}))})}filtroData(){return f(this,null,function*(){let e=yield $(".complementoRuta").val();typeof e=="string"?this.filters=e:this.filters=""})}static{this.\u0275fac=function(n){return new(n||i)(u(B),u(z),u(j),u(Y),u(V))}}static{this.\u0275cmp=I({type:i,selectors:[["app-principal"]],viewQuery:function(n,t){if(n&1&&q(O,5),n&2){let o;N(o=G())&&(t.someInput=o.first)}},standalone:!0,features:[y],decls:9,vars:21,consts:[[1,""],[3,"filtroItem","icon","componente"],[1,"card","p-5"],[3,"verItem","crearNuevoItem","editarItem","eliminarItem","activarItem","asignar","campoFiltro","endPoint","columnas","permisosAcciones","filters"],[3,"actualizarTabla","tamano","scrollable","title","save","buttonSave","edit","buttonEdit","cancel","buttonCancel","componentePrecargado","cierreModal"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"h1"),h(2),k(3,"translate"),s(),r(4,"app-globales-search",1),m("filtroItem",function(){return t.filtroData()}),s(),b(5,"br"),r(6,"div",2)(7,"app-globales-tablecrud",3),m("verItem",function(_){return t.verData(_)})("crearNuevoItem",function(_){return t.crearData(_)})("editarItem",function(_){return t.editarData(_)})("eliminarItem",function(_){return t.eliminarData(_)})("activarItem",function(_){return t.activarData(_)})("asignar",function(_){return t.asignarData(_)}),s()(),r(8,"app-globales-modal-boostrap",4),m("actualizarTabla",function(){return t.refrescarTabla()}),s()()),n&2&&(c(2),A(E(3,19,"pages-usuarios.Tipo.AdminWord")),c(2),v("icon",t.iconFilter)("componente",t.componenteFilter),c(3),v("campoFiltro",t.showcampoFiltro)("endPoint",t.endPoint)("columnas",t.columnas)("permisosAcciones",t.permisos)("filters",t.filters),c(),v("tamano",t.tamano)("scrollable",t.scrollable)("title",t.title)("save",t.save)("buttonSave",t.buttonSave)("edit",t.edit)("buttonEdit",t.buttonEdit)("cancel",t.cancel)("buttonCancel",t.buttonCancel)("componentePrecargado",t.componentePrecargado)("cierreModal",t.cierreModal))},dependencies:[M,D,J,O,H]})}}return i})();function le(i,l){if(i&1){let e=C();r(0,"input",9),m("click",function(){p(e);let t=a(2).$implicit,o=a();return d(o.actualizarPermiso(t))}),s()}}function ce(i,l){if(i&1){let e=C();r(0,"input",10),m("click",function(){p(e);let t=a(2).$implicit,o=a();return d(o.actualizarPermiso(t))}),s()}}function me(i,l){if(i&1){let e=C();r(0,"input",9),m("click",function(){p(e);let t=a().$implicit,o=a(4);return d(o.actualizarPermiso(t))}),s()}}function _e(i,l){if(i&1){let e=C();r(0,"input",10),m("click",function(){p(e);let t=a().$implicit,o=a(4);return d(o.actualizarPermiso(t))}),s()}}function pe(i,l){if(i&1){let e=C();r(0,"input",9),m("click",function(){p(e);let t=a().$implicit,o=a(5);return d(o.actualizarPermiso(t))}),s()}}function de(i,l){if(i&1){let e=C();r(0,"input",10),m("click",function(){p(e);let t=a().$implicit,o=a(5);return d(o.actualizarPermiso(t))}),s()}}function ue(i,l){if(i&1&&(g(0,pe,1,0,"input",6)(1,de,1,0),h(2),b(3,"br")),i&2){let e=l.$implicit;x(0,e.asignado=="1"?0:1),c(2),P(" ",e.mpm_nombre_permiso," ")}}function Ce(i,l){if(i&1&&(r(0,"div",3)(1,"div",12),g(2,me,1,0,"input",6)(3,_e,1,0),h(4),s(),r(5,"div",13),S(6,ue,4,2,"br",null,T),s()()),i&2){let e=l.$implicit;c(2),x(2,e.asignado=="1"?2:3),c(2),P(" ",e.mpm_nombre_permiso," "),c(2),F(e.children)}}function fe(i,l){if(i&1&&(r(0,"div")(1,"div",11),S(2,Ce,8,2,"div",3,T),s()()),i&2){let e=a(2).$implicit;c(2),F(e.children)}}function ge(i,l){if(i&1){let e=C();r(0,"div",3)(1,"div",4)(2,"h5",5),g(3,le,1,0,"input",6)(4,ce,1,0),r(5,"a",7),m("click",function(){p(e);let t=a().$implicit,o=a();return d(o.toggleCollapse(t.mpm_nombre_permiso,t.mpm_toogle))}),h(6),s()()()(),g(7,fe,4,0,"div",8),b(8,"br")}if(i&2){let e=a().$implicit;c(3),x(3,e.asignado=="1"?3:4),c(3),P(" ",e.mpm_nombre_permiso," "),c(),v("ngIf",e.mpm_toogle)}}function he(i,l){if(i&1){let e=C();r(0,"input",9),m("click",function(){p(e);let t=a(2).$implicit,o=a();return d(o.actualizarPermiso(t))}),s()}}function ve(i,l){if(i&1){let e=C();r(0,"input",10),m("click",function(){p(e);let t=a(2).$implicit,o=a();return d(o.actualizarPermiso(t))}),s()}}function xe(i,l){if(i&1){let e=C();r(0,"input",9),m("click",function(){p(e);let t=a().$implicit,o=a(4);return d(o.actualizarPermiso(t))}),s()}}function be(i,l){if(i&1){let e=C();r(0,"input",10),m("click",function(){p(e);let t=a().$implicit,o=a(4);return d(o.actualizarPermiso(t))}),s()}}function Pe(i,l){if(i&1&&(g(0,xe,1,0,"input",6)(1,be,1,0),h(2),b(3,"br")),i&2){let e=l.$implicit;x(0,e.asignado=="1"?0:1),c(2),P(" ",e.mpm_nombre_permiso," ")}}function we(i,l){if(i&1&&(r(0,"div")(1,"div",11)(2,"div",3)(3,"div",13),S(4,Pe,4,2,"br",null,T),s()()()()),i&2){let e=a(2).$implicit;c(4),F(e.children)}}function Te(i,l){if(i&1){let e=C();r(0,"div",3)(1,"div",4),g(2,he,1,0,"input",6)(3,ve,1,0),r(4,"a",7),m("click",function(){p(e);let t=a().$implicit,o=a();return d(o.toggleCollapse(t.mpm_nombre_permiso,t.mpm_toogle))}),h(5),s()()(),g(6,we,6,0,"div",8),b(7,"br")}if(i&2){let e=a().$implicit;c(2),x(2,e.asignado=="1"?2:3),c(3),P(" ",e.mpm_nombre_permiso," "),c(),v("ngIf",e.mpm_toogle)}}function Se(i,l){if(i&1&&g(0,ge,9,3)(1,Te,8,3),i&2){let e=l.$implicit,n=a();x(0,n.sinModulo.includes(e.mpm_nombre_permiso)?1:0)}}var Z=(()=>{class i{constructor(e,n,t,o,_,ee){this.router=e,this.route=n,this.userService=t,this.modulosService=o,this.PermisosService=_,this.translate=ee,this.permisos=[],this.sinModulo=["modulos","mantenimiento","zona_comun","proveedor"]}ngOnInit(){return f(this,null,function*(){yield this.userService.refreshToken("authadmin");let e=yield this.userService.getUser("authadmin"),n=this.route.snapshot.queryParams.id,t=yield this.modulosService.listaPermisos(+n);this.permisos=t.data})}actualizarPermiso(e){return f(this,null,function*(){let n=this.route.snapshot.queryParams.id,t="";e.asignado==null||e.asignado=="0"?(e.asignado="1",t="0"):(e.asignado="0",t="1"),yield this.modulosService.actualizarPermiso(e.mpm_id,e.mpm_modulo_padre_id,t,n).then(o=>{U(o.data.title,o.data.message,"success")}).catch(o=>{U(o.response.data.title,o.response.data.error,"error")})})}toggleCollapse(e,n){let t=this.permisos.find(o=>o.mpm_nombre_permiso==e);t.mpm_toogle=!n}static{this.\u0275fac=function(n){return new(n||i)(u(B),u(L),u(z),u(K),u(j),u(V))}}static{this.\u0275cmp=I({type:i,selectors:[["app-asignar-permisos"]],standalone:!0,features:[y],decls:8,vars:3,consts:[[1,""],[1,"p-5"],[1,"parent"],[1,"card"],[1,"card-header","pl-5"],[1,"mb-0"],["type","checkbox","checked","",1,"form-check-input"],[1,"btn","btn-link","collapsed","btn-block","text-left","p-0",2,"text-decoration","none",3,"click"],[4,"ngIf"],["type","checkbox","checked","",1,"form-check-input",3,"click"],["type","checkbox",1,"form-check-input",3,"click"],[1,"item"],[1,"card-header","text-center"],[1,"card-body","pl-5"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"h1"),h(2),k(3,"translate"),s(),r(4,"div",1)(5,"div",2),S(6,Se,2,1,null,null,T),s()()()),n&2&&(c(2),A(E(3,1,"pages-usuarios.Title.PermissionsTitle")),c(4),F(t.permisos))},dependencies:[Q,W,M,D],styles:["@media only screen and (min-width: 1024px) and (orientation: landscape){.item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:.5rem!important;gap:10px}.card[_ngcontent-%COMP%]{flex:1 1 calc(25% - 10px)}}@media only screen and (min-width: 1024px) and (orientation: portrait){.item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:.5rem!important;gap:10px}.card[_ngcontent-%COMP%]{flex:1 1 calc(25% - 10px)}}@media only screen and (max-width: 1023px) and (orientation: landscape){.card[_ngcontent-%COMP%]{margin-top:.5rem!important;margin-bottom:.5rem!important}}@media only screen and (max-width: 1023px) and (orientation: portrait){.card[_ngcontent-%COMP%]{margin-top:.5rem!important;margin-bottom:.5rem!important}}"]})}}return i})();var We=[{path:"",data:{breadcrumb:"Lista"},title:"Administradores",canActivate:[R],component:X},{path:"asignar-administrador",data:{breadcrumb:"Asignar"},title:"Asignar usuario administrador",canActivate:[R],component:Z}];export{We as UsuariosAdministradoresRoutes};
